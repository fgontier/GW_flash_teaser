/* * com.dyc.photo.Slideshow * * by: Scott Hedstrom (scotthedstrom@gmail.com) * url: http://www.destroyyourcomputer.com * * Example Usage: * * import com.dyc.photo.Slideshow; * var my_slideshow:Slideshow = new Slideshow(10, 4, ["http://i2.ytimg.com/vi/a1MQGVFxN64/hqdefault.jpg", "http://www.k12.hi.us/~mathappl/crystal.gif"], "easeOutExpo"); * addChild(my_slideshow); * * my_slideshow.pause(); * my_slideshow.resume(); **/package com.dyc.photo {	import com.globalworks.Arrow;	import com.globalworks.Portfolio_2;	import com.globalworks.SlideMarker;	import com.globalworks.TextHandle;	import flash.display.Sprite;	import flash.display.Loader;	import flash.events.MouseEvent;	import gs.TweenLite;		import flash.net.URLRequest;		import flash.utils.Timer;		import flash.events.Event;	import flash.events.TimerEvent;	import flash.events.ProgressEvent;		public class Slideshow_1 extends Sprite {				public var current_portfolio_target:String;		public var current_container:Sprite;				private var photo_list:Array;		private var portfolio_target:Array;		private var photo_label:Array;		private var photo_caption:Array;		private var slide_timer:Timer;		private var slide_loader:Loader;				private var timer_delay:int;		private var current_slide_index:int = 0;		private var total_slides:int;		private var fade_time:int =	1;		private var easing_style:String;				private var image1_container:Sprite;		public var image2_container:Sprite		private var _label:TextHandle;		private var _arrowRight:Arrow;		private var _arrowLeft:Arrow;				private var _portfolio:Portfolio_2		private var my_SlideMarker:SlideMarker;		private var _assetsList:XMLList;				public function Slideshow_1( assetsList:XMLList, _timerDelay:int = 5, _fadeTime:Number = 1, _easing:String = "easeOutExpo") 		{			timer_delay = _timerDelay * 1000; // convert to milisec's for Timer()						photo_list = xmlListToArray(assetsList.visual.text());			portfolio_target = xmlListToArray(assetsList.portfolio_target.text());			photo_label = xmlListToArray(assetsList.label.text());			photo_caption = xmlListToArray(assetsList.caption.text());						fade_time = _fadeTime;			easing_style = _easing;						_assetsList = assetsList;						initSlideshow();		}				public function pause():void {			if(slide_timer.running)				slide_timer.stop();		}				public function resume():void {			slide_timer.start();		}		private function initSlideshow():void 		{						// Create slideMarker			my_SlideMarker = new SlideMarker(_assetsList.length());			my_SlideMarker.y = 180;			addChild(my_SlideMarker);									slide_timer = new Timer(timer_delay);			slide_timer.addEventListener(TimerEvent.TIMER, updateTimer);			//slide_timer.addEventListener(TimerEvent.TIMER, changeSlide);						// Create Containers			image1_container = new Sprite();			image2_container = new Sprite();			addChild(image1_container);			addChild(image2_container);		// >>>>>>>>>>>>>> LABEL COMMENTED									// Create label			//_label = new TextHandle(300, 50, 0, 167, 12, 0xffffff, "left", true, "left", false, false, true, "helvetica", 0);			//image2_container.addChild(_label);						current_container = image2_container; // reference to front container			total_slides = photo_list.length;						changeSlide();		}				public function clickToNextSlide(e:MouseEvent):void 		{			if(current_slide_index + 1 < photo_list.length)				current_slide_index++;			else				current_slide_index = 0;				// set the current portfolio target for this image:			current_portfolio_target = portfolio_target[current_slide_index];						changeSlide();			my_SlideMarker.clickToNextSlide();		}				public function clickToPreviousSlide(e:MouseEvent):void 		{			if(current_slide_index == 0)				current_slide_index = photo_list.length -1;			else				current_slide_index--;							// set the current portfolio target for this image:			current_portfolio_target = portfolio_target[current_slide_index];						changeSlide();			my_SlideMarker.clickToPreviousSlide();		}				private function displaySlide(e:Event):void {						current_container.addChild(slide_loader.content);			current_container.alpha = 0;			TweenLite.to(current_container, fade_time, { alpha:1, onComplete:onFinishTween } );		}						private function onFinishTween():void		{			slide_timer.start(); 		}				private function updateTimer(e:TimerEvent):void 		{			// Any slides left?			if(current_slide_index + 1 < photo_list.length)				current_slide_index++;			else				current_slide_index = 0;							// set the current portfolio target for this image:			current_portfolio_target = portfolio_target[current_slide_index];						changeSlide();				my_SlideMarker.clickToNextSlide();		}								private function changeSlide(e:Event = null):void {			if(slide_timer.running)				slide_timer.stop();				// swap container depths			if(current_container == image2_container)				current_container = image1_container;			else				current_container = image2_container;							// Switch the photo			current_container.alpha = 0;			swapChildren(image2_container, image1_container);					// create a new loader for the slide:			slide_loader = new Loader();			slide_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, displaySlide);			slide_loader.load(new URLRequest(photo_list[current_slide_index]));							// >>>>>>>>>>>>>> LABEL COMMENTED							// set the label for the slide:			//_label.htmlText = photo_label[current_slide_index];						// set the caption for the slide... not implemented yet:			//_caption.htmlText = photo_label[current_slide_index];							// set the current portfolio target for this image:			current_portfolio_target = portfolio_target[current_slide_index];		}				public static function xmlListToArray($x:XMLList):Array {               			var a:Array=[], i:String;			for (i in $x) a[i] = $x[i];			return a;		}				}}						